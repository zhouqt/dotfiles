#!/usr/bin/env ruby
#Author: Roy L Zuo (roylzuo at gmail dot com)
#Last Change: Sun Apr 12 07:42:01 2009 EST
#Description: get exchange rate from yahoo
require 'net/http'
require 'uri'

if __FILE__ == $0:
    begin
        f = ARGV[0].upcase
        t = ARGV[1].upcase
        m = ARGV[2]
    rescue
        puts "Usage:    #{$0} <from> <to> <amount>"
        exit
    end
    page = Net::HTTP.get( URI.parse "http://tw.money.yahoo.com/currency_exc_result?amt=#{m}&from=#{f}&to=#{t}" )
    result = page.match(/=\s<em>(\d+(?:\.\d+)?)<\/em>/)[1]
    puts result
end
